
<!DOCTYPE html>


<html dir="ltr" lang="en">
  <head>
    <meta charset="utf-8">
    
    <title>Examples &mdash; Misaka 1.0.1 documentation</title>
    
    <link rel="stylesheet" href="_static/nature.css" type="text/css">
    <link rel="stylesheet" href="_static/pygments.css" type="text/css">
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '1.0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="next" title="API" href="api.html">
    <link rel="prev" title="Installation" href="installation.html"> 
  </head>
  <body id="doc-top">
<div class="related">
  <h3>Navigation</h3>
  <ul>
    <li><a href="index.html">Misaka 1.0.1 documentation</a> &raquo;</li>
    <li>
      <a href="genindex.html" title="General Index"
         accesskey="I">index</a>
      </li>
    <li> / 
      <a href="py-modindex.html" title="Python Module Index"
         >modules</a>
      </li>
    <li> / 
      <a href="api.html" title="API"
         accesskey="N">next</a>
      </li>
    <li> / 
      <a href="installation.html" title="Installation"
         accesskey="P">previous</a>
      </li>
  </ul>
</div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="examples">
<span id="id1"></span><h1>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h1>
<p>Here are some example of custom renderers and pre- and postprocessors.</p>
<div class="section" id="extensions-flags">
<h2>Extensions &amp; flags<a class="headerlink" href="#extensions-flags" title="Permalink to this headline">¶</a></h2>
<p>All extensions and flags are listed under constants on the <a class="reference internal" href="api.html"><em>API</em></a> page.
Both are pass as an argument to the renderer or the parser. For example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">html</span><span class="p">(</span><span class="s">&#39;some ~~markdown~~ ^text&#39;</span><span class="p">,</span>
    <span class="n">extensions</span><span class="o">=</span><span class="n">EXT_STRIKETHROUGH</span> <span class="o">|</span> <span class="n">EXT_SUPERSCRIPT</span><span class="p">,</span>
    <span class="n">render_flags</span><span class="o">=</span><span class="n">HTML_SMARTYPANTS</span> <span class="o">|</span> <span class="n">HTML_USE_XHTML</span><span class="p">)</span>
</pre></div>
</div>
<p>Or:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">rndr</span> <span class="o">=</span> <span class="n">HtmlRenderer</span><span class="p">(</span><span class="n">HTML_USE_XHTML</span> <span class="o">|</span> <span class="n">HTML_ESCAPE</span><span class="p">)</span>
<span class="n">md</span> <span class="o">=</span> <span class="n">Markdown</span><span class="p">(</span><span class="n">rndr</span><span class="p">,</span> <span class="n">EXT_STRIKETHROUGH</span> <span class="o">|</span> <span class="n">EXT_SUPERSCRIPT</span><span class="p">)</span>

<span class="n">md</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;some ~~markdown~~ ^text&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="renderer-callbacks">
<h2>Renderer callbacks<a class="headerlink" href="#renderer-callbacks" title="Permalink to this headline">¶</a></h2>
<p>Here is a list of methods (with the arguments they accept) that can be
implemented in a renderer. None of these methods are already in the
<tt class="xref py py-class docutils literal"><span class="pre">BaseRenderer</span></tt>. It just puts all the methods it recognizes in the
callback list.</p>
<p><strong>Block-level</strong>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">block_code</span><span class="p">(</span><span class="n">code</span><span class="p">,</span> <span class="n">language</span><span class="p">)</span>
<span class="n">block_quote</span><span class="p">(</span><span class="n">quote</span><span class="p">)</span>
<span class="n">block_html</span><span class="p">(</span><span class="n">raw_html</span><span class="p">)</span>
<span class="n">header</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">level</span><span class="p">)</span>
<span class="n">hrule</span><span class="p">()</span>
<span class="nb">list</span><span class="p">(</span><span class="n">contents</span><span class="p">,</span> <span class="n">is_ordered</span><span class="p">)</span>
<span class="n">list_item</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">is_ordered</span><span class="p">)</span>
<span class="n">paragraph</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
<span class="n">table</span><span class="p">(</span><span class="n">header</span><span class="p">,</span> <span class="n">body</span><span class="p">)</span>
<span class="n">table_row</span><span class="p">(</span><span class="n">content</span><span class="p">)</span>
<span class="n">table_cell</span><span class="p">(</span><span class="n">content</span><span class="p">,</span> <span class="n">flags</span><span class="p">)</span>
</pre></div>
</div>
<p>The <tt class="docutils literal"><span class="pre">flags</span></tt> argument contains the alignment of the cell and if it&#8217;s an
header cell or not.</p>
<p><strong>Span-level</strong>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">autolink</span><span class="p">(</span><span class="n">link</span><span class="p">,</span> <span class="n">is_email</span><span class="p">)</span>
<span class="n">codespan</span><span class="p">(</span><span class="n">code</span><span class="p">)</span>
<span class="n">double_emphasis</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
<span class="n">emphasis</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
<span class="n">image</span><span class="p">(</span><span class="n">link</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">alt_text</span><span class="p">)</span>
<span class="n">linebreak</span><span class="p">()</span>
<span class="n">link</span><span class="p">(</span><span class="n">link</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">content</span><span class="p">)</span>
<span class="n">raw_html</span><span class="p">(</span><span class="n">raw_html</span><span class="p">)</span>
<span class="n">triple_emphasis</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
<span class="n">strikethrough</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
<span class="n">superscript</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Low-level</strong>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">entity</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
<span class="n">normal_text</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Header and footer of the document</strong>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">doc_header</span><span class="p">()</span>
<span class="n">doc_footer</span><span class="p">()</span>
</pre></div>
</div>
<p><strong>Pre- and post-process</strong>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">preprocess</span><span class="p">(</span><span class="n">full_document</span><span class="p">)</span>
<span class="n">postprocess</span><span class="p">(</span><span class="n">full_document</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="a-custom-renderer">
<h2>A custom renderer<a class="headerlink" href="#a-custom-renderer" title="Permalink to this headline">¶</a></h2>
<p>It&#8217;s actually pretty easy:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">misaka</span> <span class="kn">import</span> <span class="n">Markdown</span><span class="p">,</span> <span class="n">BaseRenderer</span><span class="p">,</span> <span class="n">HtmlRenderer</span><span class="p">,</span> <span class="n">SmartyPants</span><span class="p">,</span> \
    <span class="n">EXT_FENCED_CODE</span><span class="p">,</span> <span class="n">EXT_TABLES</span><span class="p">,</span> <span class="n">EXT_AUTOLINK</span><span class="p">,</span> <span class="n">EXT_STRIKETHROUGH</span><span class="p">,</span> \
    <span class="n">EXT_SUPERSCRIPT</span><span class="p">,</span> <span class="n">HTML_USE_XHTML</span><span class="p">,</span> \
    <span class="n">TABLE_ALIGN_L</span><span class="p">,</span> <span class="n">TABLE_ALIGN_R</span><span class="p">,</span> <span class="n">TABLE_ALIGN_C</span><span class="p">,</span> \
    <span class="n">TABLE_ALIGNMASK</span><span class="p">,</span> <span class="n">TABLE_HEADER</span>


<span class="k">class</span> <span class="nc">BleepRenderer</span><span class="p">(</span><span class="n">HtmlRenderer</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">block_code</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">lang</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">lang</span><span class="p">:</span>
            <span class="n">lang</span> <span class="o">=</span> <span class="s">&#39; class=&quot;</span><span class="si">%s</span><span class="s">&quot;&#39;</span> <span class="o">%</span> <span class="n">lang</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">lang</span>  <span class="o">=</span> <span class="s">&#39;&#39;</span>
        <span class="k">return</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">&lt;pre</span><span class="si">%s</span><span class="s">&gt;&lt;code&gt;</span><span class="si">%s</span><span class="s">&lt;/code&gt;&lt;/pre&gt;</span><span class="se">\n</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">lang</span><span class="p">,</span> <span class="n">text</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">hrule</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">flags</span> <span class="o">&amp;</span> <span class="n">HTML_USE_XHTML</span><span class="p">:</span>
            <span class="k">return</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">&lt;hr/&gt;</span><span class="se">\n</span><span class="s">&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">&lt;hr&gt;</span><span class="se">\n</span><span class="s">&#39;</span>

    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">is_ordered</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">is_ordered</span><span class="p">:</span>
            <span class="k">return</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">&lt;ol&gt;</span><span class="si">%s</span><span class="s">&lt;/ol&gt;</span><span class="se">\n</span><span class="s">&#39;</span> <span class="o">%</span> <span class="n">text</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">&lt;ul&gt;</span><span class="si">%s</span><span class="s">&lt;/ul&gt;</span><span class="se">\n</span><span class="s">&#39;</span> <span class="o">%</span> <span class="n">text</span>

    <span class="k">def</span> <span class="nf">list_item</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">is_ordered</span><span class="p">):</span>
        <span class="k">return</span> <span class="s">&#39;&lt;li&gt;</span><span class="si">%s</span><span class="s">&lt;/li&gt;</span><span class="se">\n</span><span class="s">&#39;</span> <span class="o">%</span> <span class="n">text</span>

    <span class="k">def</span> <span class="nf">table</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">header</span><span class="p">,</span> <span class="n">body</span><span class="p">):</span>
        <span class="k">return</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">&lt;table&gt;&lt;thead&gt;</span><span class="se">\n</span><span class="si">%s</span><span class="s">&lt;/thead&gt;&lt;tbody&gt;</span><span class="se">\n</span><span class="si">%s</span><span class="s">&lt;/tbody&gt;&lt;/table&gt;</span><span class="se">\n</span><span class="s">&#39;</span> <span class="o">%</span> \
            <span class="p">(</span><span class="n">header</span><span class="p">,</span> <span class="n">body</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">table_row</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">):</span>
        <span class="k">return</span> <span class="s">&#39;&lt;tr&gt;</span><span class="se">\n</span><span class="si">%s</span><span class="s">&lt;/tr&gt;</span><span class="se">\n</span><span class="s">&#39;</span> <span class="o">%</span> <span class="n">text</span>

    <span class="k">def</span> <span class="nf">table_cell</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">flags</span><span class="p">):</span>
        <span class="n">flags</span> <span class="o">=</span> <span class="n">flags</span> <span class="o">&amp;</span> <span class="n">TABLE_ALIGNMASK</span>
        <span class="k">if</span> <span class="n">flags</span> <span class="o">==</span> <span class="n">TABLE_ALIGN_C</span><span class="p">:</span>
            <span class="n">align</span> <span class="o">=</span> <span class="s">&#39;align=&quot;center&quot;&#39;</span>
        <span class="k">elif</span> <span class="n">flags</span> <span class="o">==</span> <span class="n">TABLE_ALIGN_L</span><span class="p">:</span>
            <span class="n">align</span> <span class="o">=</span> <span class="s">&#39;align=&quot;left&quot;&#39;</span>
        <span class="k">elif</span> <span class="n">flags</span> <span class="o">==</span> <span class="n">TABLE_ALIGN_R</span><span class="p">:</span>
            <span class="n">align</span> <span class="o">=</span> <span class="s">&#39;align=&quot;right&quot;&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">align</span> <span class="o">=</span> <span class="s">&#39;&#39;</span>

        <span class="k">if</span> <span class="n">flags</span> <span class="o">&amp;</span> <span class="n">TABLE_HEADER</span><span class="p">:</span>
            <span class="k">return</span> <span class="s">&#39;&lt;th</span><span class="si">%s</span><span class="s">&gt;</span><span class="si">%s</span><span class="s">&lt;/th&gt;</span><span class="se">\n</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">align</span><span class="p">,</span> <span class="n">text</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="s">&#39;&lt;td</span><span class="si">%s</span><span class="s">&gt;</span><span class="si">%s</span><span class="s">&lt;/td&gt;</span><span class="se">\n</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">align</span><span class="p">,</span> <span class="n">text</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">autolink</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">link</span><span class="p">,</span> <span class="n">is_email</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">is_email</span><span class="p">:</span>
            <span class="k">return</span> <span class="s">&#39;&lt;a href=&quot;mailto:</span><span class="si">%(link)s</span><span class="s">&quot;&gt;</span><span class="si">%(link)s</span><span class="s">&lt;/a&gt;&#39;</span> <span class="o">%</span> <span class="p">{</span><span class="s">&#39;link&#39;</span><span class="p">:</span> <span class="n">link</span><span class="p">}</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="s">&#39;&lt;a href=&quot;</span><span class="si">%(link)s</span><span class="s">&quot;&gt;</span><span class="si">%(link)s</span><span class="s">&lt;/a&gt;&#39;</span> <span class="o">%</span> <span class="p">{</span><span class="s">&#39;link&#39;</span><span class="p">:</span> <span class="n">link</span><span class="p">}</span>


<span class="n">md</span> <span class="o">=</span> <span class="n">Markdown</span><span class="p">(</span><span class="n">BleepRenderer</span><span class="p">(),</span>
    <span class="n">EXT_FENCED_CODE</span> <span class="o">|</span> <span class="n">EXT_TABLES</span> <span class="o">|</span> <span class="n">EXT_AUTOLINK</span> <span class="o">|</span>
    <span class="n">EXT_STRIKETHROUGH</span> <span class="o">|</span> <span class="n">EXT_SUPERSCRIPT</span><span class="p">)</span>


<span class="k">print</span><span class="p">(</span><span class="n">md</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">u&#39;&#39;&#39;</span>
<span class="s">Unordered</span>

<span class="s">- One</span>
<span class="s">- Two</span>
<span class="s">- Three</span>

<span class="s">And now ordered:</span>

<span class="s">1. Three</span>
<span class="s">2. Two</span>
<span class="s">3. One</span>

<span class="s">An email: example@example.com</span>

<span class="s">And an URL: http://example.com</span>
<span class="s">&#39;&#39;&#39;</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="section" id="pre-or-post-processor">
<h2>Pre- or post-processor<a class="headerlink" href="#pre-or-post-processor" title="Permalink to this headline">¶</a></h2>
<p>A pre- or post-processor is just a method called <tt class="docutils literal"><span class="pre">preprocess</span></tt> or <tt class="docutils literal"><span class="pre">postprocess</span></tt>
that accepts one argument with the complete text. Or a class with one (or both)
of these methods. For example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">ExamplePreprocessor</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">preprocess</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">text</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39; &#39;</span><span class="p">,</span> <span class="s">&#39;_&#39;</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">BleepRenderer</span><span class="p">(</span><span class="n">HtmlRenderer</span><span class="p">,</span> <span class="n">ExamplePreprocessor</span><span class="p">):</span>
    <span class="k">pass</span>
</pre></div>
</div>
<p>Or:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">BleepRenderer</span><span class="p">(</span><span class="n">HtmlRenderer</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">preprocess</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">text</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39; &#39;</span><span class="p">,</span> <span class="s">&#39;_&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Same rules apply for the post-processor, but you&#8217;ll be processing text that&#8217;s
already rendered.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
<h3>Misaka</h3>
<p>The Python binding for Sundown, a markdown parsing library.</p>
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Examples</a><ul>
<li><a class="reference internal" href="#extensions-flags">Extensions &amp; flags</a></li>
<li><a class="reference internal" href="#renderer-callbacks">Renderer callbacks</a></li>
<li><a class="reference internal" href="#a-custom-renderer">A custom renderer</a></li>
<li><a class="reference internal" href="#pre-or-post-processor">Pre- or post-processor</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="installation.html"
                        title="previous chapter">Installation</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="api.html"
                        title="next chapter">API</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/examples.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<h3>Quick search</h3>
<form class="search" action="search.html" method="get">
  <p><input type="text" name="q">
  <input type="submit" value="Go"></p>
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<p class="searchtip" style="font-size: 90%">
Enter search terms or a module, class or function name.
</p>
          <hr>
          <p>&copy; Copyright 2012, Frank Smit.</p>
        </div>
      </div>
      <div class="clearer"></div>
    </div>}
  </body>
</html>